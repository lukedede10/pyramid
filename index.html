<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Customer Experience Pyramid (VMO2)</title>
  <style>
    :root{
      --bg:#07121f;
      --card:#ffffff;
      --text:#0b1220;
      --muted:#64748b;
      --stroke:#d6dde8;

      --o2:#005EB8;
      --o2Dark:#004A93;
      --red:#E4002B;
      --redDark:#B80022;

      --radius:22px;
      --shadow: rgba(0,0,0,.25);
      --pad: 18px;
      --gap: 18px;
      --max: 1100px;

      /* Pyramid sizing */
      --pW: 1260px;     /* max width pyramid can reach */
      --tileH: 86px;    /* consistent tile height */
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 520px at 20% 0%, rgba(0,94,184,.35), transparent 55%),
        radial-gradient(900px 520px at 80% 0%, rgba(228,0,43,.28), transparent 55%),
        var(--bg);
      color: #eaf2ff;
    }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: calc(var(--pad) + env(safe-area-inset-top)) var(--pad) calc(var(--pad) + env(safe-area-inset-bottom));
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }

    .logoRow{
      display:flex;
      align-items:center;
      gap: 10px;
    }

    .logo{
      width: 46px;
      height: 46px;
      border-radius: 14px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      display:grid;
      place-items:center;
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
      user-select:none;
      font-weight: 900;
      letter-spacing: .5px;
    }
    .logo.vm{ outline: 2px solid rgba(228,0,43,.35); }

    .titleBlock{ min-width: 0; }
    .title{
      margin:0;
      font-size: 20px;
      line-height: 1.2;
      letter-spacing: .2px;
    }
    .subtitle{
      margin: 4px 0 0;
      color: rgba(234,242,255,.75);
      font-size: 13px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(234,242,255,.92);
      font-size: 13px;
      white-space: nowrap;
      user-select:none;
    }
    .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--o2), var(--red));
      box-shadow: 0 0 0 4px rgba(255,255,255,.06);
    }

    .board{
      position: relative;
      margin-top: 14px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: calc(var(--radius) + 8px);
      padding: 16px;
      box-shadow: 0 18px 40px rgba(0,0,0,.22);
      overflow:hidden;
    }

    /* Axis */
    .axis{
      position:absolute;
      left: 10px;
      top: 16px;
      bottom: 16px;
      width: 42px;
      pointer-events:none;
      opacity: .9;
    }
    .axis .line{
      position:absolute;
      left: 20px;
      top: 8px;
      bottom: 8px;
      border-left: 2px dashed rgba(255,255,255,.25);
    }
    .axis .labelTop, .axis .labelBottom{
      position:absolute;
      left: 0;
      transform: rotate(-90deg);
      transform-origin: left top;
      font-size: 12px;
      letter-spacing: .4px;
      color: rgba(234,242,255,.8);
    }
    .axis .labelTop{ top: 52px; }
    .axis .labelBottom{ bottom: 74px; }

    .content{
      margin-left: 46px; /* space for axis */
      display:flex;
      justify-content:center;
    }

    /* PYRAMID CONTAINER */
    .pyramid{
      width: min(var(--pW), 100%);
      display:flex;
      flex-direction:column;
      gap: var(--gap);
      padding: 10px 0;
    }

    /* Each row is a narrower strip of the pyramid width */
    .prow{
      width: var(--rowW);
      max-width: 100%;
      margin: 0 auto; /* centers each row to form pyramid */
      display:grid;
      gap: var(--gap);
      align-items:stretch;
    }

    /* Row widths (true pyramid steps) */
    .r1{ --rowW: 520px; grid-template-columns: 1fr; }
    .r2{ --rowW: 820px; grid-template-columns: repeat(2, minmax(0,1fr)); }
    .r3{ --rowW: 980px; grid-template-columns: repeat(3, minmax(0,1fr)); }
    .r4{ --rowW: 1120px; grid-template-columns: repeat(4, minmax(0,1fr)); }
    .r5{ --rowW: 1260px; grid-template-columns: repeat(5, minmax(0,1fr)); }

    /* Mobile: keep pyramid feel but stack */
    @media (max-width: 860px){
      .axis{ display:none; }
      .content{ margin-left:0; }
      .pyramid{ width: 100%; }

      .prow{ width: 100% !important; }
      .r2,.r3,.r4,.r5{ grid-template-columns: 1fr; }
    }

    /* TILE BUTTON (no "Open" lane) */
    .tile{
      appearance:none;
      border: 2px solid var(--stroke);
      background: rgba(255,255,255,.96);
      color: var(--text);
      border-radius: var(--radius);
      padding: 12px 14px;
      box-shadow: 0 12px 28px rgba(0,0,0,.16);
      cursor:pointer;
      min-height: var(--tileH);
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
      user-select:none;
    }
    .tile:focus{ outline: 4px solid rgba(255,255,255,.22); outline-offset: 2px; }
    .tile:hover{ transform: translateY(-1px); box-shadow: 0 16px 34px rgba(0,0,0,.2); }
    .tile:active{ transform: translateY(0px) scale(.995); }

    .tile.blue{
      border-color: rgba(0,94,184,.38);
      box-shadow: 0 12px 28px rgba(0,94,184,.10), 0 12px 28px rgba(0,0,0,.12);
    }
    .tile.red{
      border-color: rgba(228,0,43,.40);
      box-shadow: 0 12px 28px rgba(228,0,43,.10), 0 12px 28px rgba(0,0,0,.12);
    }

    .tileMain{
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: 0;
      width: 100%;
    }

    /* Line-by-line color */
    .tlines{
      display:flex;
      flex-direction:column;
      gap: 3px;
      line-height: 1.05;
      font-weight: 950;
      letter-spacing: .1px;
      font-size: 18px;
    }
    .tlines .l{ display:block; }
    .tlines .l1{ color: var(--o2); }
    .tlines .l2{ color: var(--red); }
    .tlines .l3{ color: var(--o2); }
    .tlines .l4{ color: var(--red); }

    /* Special top title: CHOOSE red / CUSTOMER blue */
    .chooseLine{
      font-weight: 1000;
      letter-spacing: .2px;
      font-size: 20px;
      line-height: 1.05;
    }
    .chooseLine .choose{ color: var(--red); }
    .chooseLine .customer{ color: var(--o2); }

    /* Modal */
    .modalOverlay{
      position:fixed;
      inset:0;
      background: rgba(2,6,14,.72);
      backdrop-filter: blur(8px);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 50;
    }
    .modalOverlay.open{ display:flex; }

    .modal{
      width: min(720px, 100%);
      background: rgba(255,255,255,.96);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: calc(var(--radius) + 6px);
      box-shadow: 0 30px 70px rgba(0,0,0,.35);
      overflow:hidden;
      color: var(--text);
    }
    .modalHeader{
      padding: 14px 14px 12px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      border-bottom: 1px solid rgba(0,0,0,.06);
      background:
        radial-gradient(700px 220px at 20% 0%, rgba(0,94,184,.15), transparent 60%),
        radial-gradient(700px 220px at 80% 0%, rgba(228,0,43,.13), transparent 60%),
        rgba(255,255,255,.96);
    }
    .modalTitle{
      margin:0;
      font-size: 18px;
      line-height: 1.2;
      font-weight: 1000;
    }
    .modalTag{
      margin-top: 6px;
      display:inline-flex;
      gap: 8px;
      align-items:center;
      font-size: 12px;
      color: rgba(11,18,32,.6);
      font-weight: 800;
    }
    .tagDot{
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--o2), var(--red));
    }

    .closeBtn{
      border: 0;
      background: rgba(11,18,32,.06);
      color: rgba(11,18,32,.85);
      border-radius: 14px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 900;
    }
    .closeBtn:hover{ background: rgba(11,18,32,.10); }

    .modalBody{ padding: 14px; }
    .modalBody p{
      margin: 0 0 10px;
      color: rgba(11,18,32,.82);
      line-height: 1.55;
      font-size: 14px;
    }

    .modalFooter{
      padding: 12px 14px 14px;
      display:flex;
      justify-content:flex-end;
      gap: 10px;
      border-top: 1px solid rgba(0,0,0,.06);
      background: rgba(255,255,255,.92);
    }
    .primaryBtn{
      border: 0;
      border-radius: 16px;
      padding: 11px 14px;
      cursor:pointer;
      font-weight: 1000;
      color: #fff;
      background: linear-gradient(135deg, var(--o2), var(--red));
      box-shadow: 0 14px 30px rgba(0,0,0,.18);
    }
    .primaryBtn:hover{ filter: brightness(1.02); }

    .ghostBtn{
      border: 1px solid rgba(11,18,32,.15);
      background: transparent;
      border-radius: 16px;
      padding: 11px 14px;
      cursor:pointer;
      font-weight: 1000;
      color: rgba(11,18,32,.85);
    }
    .ghostBtn:hover{ background: rgba(11,18,32,.04); }

    footer{
      margin-top: 14px;
      color: rgba(234,242,255,.7);
      font-size: 12px;
      display:flex;
      justify-content:space-between;
      gap: 10px;
      flex-wrap:wrap;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      border-radius: 10px;
      padding: 2px 8px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logoRow" aria-label="Logo placeholders">
          <div class="logo vm" title="Virgin Media logo placeholder">VM</div>
        </div>
        <div class="titleBlock">
          <h1 class="title">Customer Experience Pyramid</h1>
          <p class="subtitle">Tap any box to open guidance.</p>
        </div>
      </div>

      <div class="pill" title="Goal">
        <span class="dot" aria-hidden="true"></span>
        Guaranteed “Very Satisfied” behaviours
      </div>
    </header>

    <section class="board" aria-label="Pyramid layout">
      <div class="axis" aria-hidden="true">
        <div class="line"></div>
        <div class="labelTop">Very satisfied</div>
        <div class="labelBottom">Satisfied</div>
      </div>

      <div class="content">
        <div class="pyramid">
          <!-- Row 1 -->
          <div class="prow r1">
            <button class="tile" data-key="choose_customer" type="button" aria-label="Choose Customer">
              <div class="tileMain">
                <div class="chooseLine">
                  <span class="choose">CHOOSE</span>
                  <span class="customer"> CUSTOMER.</span>
                </div>
              </div>
            </button>
          </div>

          <!-- Row 2 -->
          <div class="prow r2">
            <button class="tile red" data-key="winning_household" type="button" aria-label="Winning the Household">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Winning the</span>
                  <span class="l l2">Household</span>
                </div>
              </div>
            </button>

            <button class="tile red" data-key="building_trust" type="button" aria-label="Building Trust">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Building</span>
                  <span class="l l2">TRUST</span>
                </div>
              </div>
            </button>
          </div>

          <!-- Row 3 -->
          <div class="prow r3">
            <button class="tile blue" data-key="offering_benefits" type="button" aria-label="Offering Benefits">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Offering Benefits</span>
                  <span class="l l2">VOLT, Priority,</span>
                  <span class="l l3">Tech Leads</span>
                </div>
              </div>
            </button>

            <button class="tile blue" data-key="wifi_guarantee" type="button" aria-label="WiFi Guarantee">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">WIFI Guarantee</span>
                  <span class="l l2">WIFI walk &amp;</span>
                  <span class="l l3">Speed test</span>
                </div>
              </div>
            </button>

            <button class="tile blue" data-key="install_right_first_time" type="button" aria-label="Install and service it right first time">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Install &amp;</span>
                  <span class="l l2">Service it right</span>
                  <span class="l l3">first time</span>
                </div>
              </div>
            </button>
          </div>

          <!-- Row 4 -->
          <div class="prow r4">
            <button class="tile red" data-key="build_rapport" type="button" aria-label="Build Rapport with Customer">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Build Rapport</span>
                  <span class="l l2">with Customer</span>
                </div>
              </div>
            </button>

            <button class="tile red" data-key="keep_updated" type="button" aria-label="Keep the customer updated running commentary">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Keep the customer</span>
                  <span class="l l2">updated</span>
                  <span class="l l3">– running commentary</span>
                </div>
              </div>
            </button>

            <button class="tile red" data-key="courteous_knowledgeable" type="button" aria-label="Courteous and Knowledgeable">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Courteous &amp;</span>
                  <span class="l l2">Knowledgeable</span>
                </div>
              </div>
            </button>

            <button class="tile red" data-key="ownership_accountability" type="button" aria-label="Ownership and Accountability">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Ownership &amp;</span>
                  <span class="l l2">Accountability</span>
                </div>
              </div>
            </button>
          </div>

          <!-- Row 5 -->
          <div class="prow r5">
            <button class="tile blue" data-key="call_ahead" type="button" aria-label="Call ahead of time">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Call ahead</span>
                  <span class="l l2">of time</span>
                </div>
              </div>
            </button>

            <button class="tile blue" data-key="arrived_timeslot" type="button" aria-label="Arrived in Timeslot">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Arrived in</span>
                  <span class="l l2">Timeslot</span>
                </div>
              </div>
            </button>

            <button class="tile blue" data-key="introduce_yourself" type="button" aria-label="Introduce yourself">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Introduce</span>
                  <span class="l l2">yourself</span>
                </div>
              </div>
            </button>

            <button class="tile blue" data-key="respect_home" type="button" aria-label="Treated the customers home with respect">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Treated the</span>
                  <span class="l l2">customers home</span>
                  <span class="l l3">with respect</span>
                </div>
              </div>
            </button>

            <button class="tile blue" data-key="overshoes_id" type="button" aria-label="Wore Overshoes and ID Badge">
              <div class="tileMain">
                <div class="tlines">
                  <span class="l l1">Wore Overshoes &amp;</span>
                  <span class="l l2">ID Badge</span>
                </div>
              </div>
            </button>
          </div>

        </div>
      </div>
    </section>

    <footer>
      <div>Keyboard: <span class="kbd">Esc</span> closes the panel.</div>
    </footer>
  </div>

  <!-- Modal -->
  <div class="modalOverlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal">
      <div class="modalHeader">
        <div>
          <h2 class="modalTitle" id="modalTitle">Title</h2>
          <div class="modalTag"><span class="tagDot" aria-hidden="true"></span><span id="modalTagText">Guidance</span></div>
        </div>
        <button class="closeBtn" id="closeBtn" type="button" aria-label="Close">Close ✕</button>
      </div>
      <div class="modalBody" id="modalBody">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      </div>
      <div class="modalFooter">
        <button class="ghostBtn" id="copyBtn" type="button">Copy text</button>
        <button class="primaryBtn" id="doneBtn" type="button">Done</button>
      </div>
    </div>
  </div>

  <script>
    const CONTENT = {
      choose_customer: { title:"CHOOSE CUSTOMER.", tag:"Foundation", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer at dui ac mauris pellentesque tristique.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non justo ut erat vulputate ultricies.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam vitae ipsum vitae nisi pulvinar interdum."
      ]},
      winning_household: { title:"Winning the Household", tag:"Outcome", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse potenti.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent vitae sem vel arcu posuere aliquam."
      ]},
      building_trust: { title:"Building TRUST", tag:"Outcome", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc at urna quis dui egestas eleifend.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam erat volutpat."
      ]},
      offering_benefits: { title:"Offering Benefits (VOLT, Priority, Tech Leads)", tag:"Value add", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis a arcu sed massa porta bibendum.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. In hac habitasse platea dictumst."
      ]},
      wifi_guarantee: { title:"WIFI Guarantee (WIFI walk & Speed test)", tag:"Quality check", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras nec elit at turpis gravida consectetur.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus blandit, mi nec aliquet hendrerit."
      ]},
      install_right_first_time: { title:"Install & Service it right first time", tag:"First time right", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque habitant morbi tristique senectus et netus.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi vulputate dolor in urna posuere, id ultrices purus gravida."
      ]},
      build_rapport: { title:"Build Rapport with Customer", tag:"Behaviour", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus dignissim felis non lorem pellentesque.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vel mi id libero aliquam ultrices."
      ]},
      keep_updated: { title:"Keep the customer updated – running commentary", tag:"Communication", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris condimentum metus in purus pharetra.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur et ultricies nulla."
      ]},
      courteous_knowledgeable: { title:"Courteous & Knowledgeable", tag:"Professionalism", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ullamcorper ex at odio luctus.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed faucibus, velit sed congue luctus."
      ]},
      ownership_accountability: { title:"Ownership & Accountability", tag:"Accountability", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut sit amet neque tincidunt, pretium nibh sed, euismod augue.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam porttitor, justo vitae laoreet hendrerit."
      ]},
      call_ahead: { title:"Call ahead of time", tag:"Arrival standards", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin placerat, eros nec vestibulum posuere.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla facilisi."
      ]},
      arrived_timeslot: { title:"Arrived in Timeslot", tag:"Arrival standards", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tristique nisl at lectus bibendum.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut at eros nec lorem consequat."
      ]},
      introduce_yourself: { title:"Introduce yourself", tag:"Arrival standards", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer dignissim, nisl vitae.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tempor risus vel."
      ]},
      respect_home: { title:"Treated the customers home with respect", tag:"In-home behaviour", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum non lectus vel nisi.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse vitae."
      ]},
      overshoes_id: { title:"Wore Overshoes & ID Badge", tag:"In-home behaviour", body:[
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam consequat urna at.",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque."
      ]}
    };

    const overlay = document.getElementById("overlay");
    const modalTitle = document.getElementById("modalTitle");
    const modalTagText = document.getElementById("modalTagText");
    const modalBody = document.getElementById("modalBody");
    const closeBtn = document.getElementById("closeBtn");
    const doneBtn = document.getElementById("doneBtn");
    const copyBtn = document.getElementById("copyBtn");
    let lastFocusEl = null;

    function openModal(key){
      const item = CONTENT[key] || { title:"Info", tag:"Guidance", body:["Lorem ipsum dolor sit amet."] };
      lastFocusEl = document.activeElement;

      modalTitle.textContent = item.title;
      modalTagText.textContent = item.tag;
      modalBody.innerHTML = item.body.map(p => `<p>${escapeHtml(p)}</p>`).join("");

      overlay.classList.add("open");
      overlay.setAttribute("aria-hidden","false");
      closeBtn.focus();
      document.body.style.overflow = "hidden";
    }

    function closeModal(){
      overlay.classList.remove("open");
      overlay.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
      if(lastFocusEl && typeof lastFocusEl.focus === "function") lastFocusEl.focus();
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    document.querySelectorAll(".tile").forEach(btn=>{
      btn.addEventListener("click", () => openModal(btn.dataset.key));
    });

    closeBtn.addEventListener("click", closeModal);
    doneBtn.addEventListener("click", closeModal);
    overlay.addEventListener("click", (e)=>{ if(e.target === overlay) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key === "Escape" && overlay.classList.contains("open")) closeModal(); });

    copyBtn.addEventListener("click", async ()=>{
      const text = `${modalTitle.textContent}\n\n` + Array.from(modalBody.querySelectorAll("p")).map(p => p.textContent).join("\n\n");
      try{
        await navigator.clipboard.writeText(text);
        copyBtn.textContent = "Copied ✓";
        setTimeout(()=> copyBtn.textContent = "Copy text", 1200);
      }catch{
        copyBtn.textContent = "Copy failed";
        setTimeout(()=> copyBtn.textContent = "Copy text", 1200);
      }
    });
  </script>
</body>
</html>
